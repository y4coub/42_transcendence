
# Environment Configuration for ft_transcendance API
# Last updated: 2025-10-18

# =============================================================================
# Application Environment
# =============================================================================
NODE_ENV=development
API_HOST=0.0.0.0
API_PORT=3000
API_LOG_LEVEL=info
TRUST_PROXY=true

# =============================================================================
# Database Configuration
# =============================================================================
# SQLite database path (must use file: scheme)
DATABASE_URL=file:./db/data/app.db

# =============================================================================
# JWT Authentication Secrets
# =============================================================================
# IMPORTANT: Generate secure secrets using: openssl rand -base64 32
# Replace these with your own secure random strings in production
JWT_ACCESS_SECRET=2NYEzTx33gAfo5vZlfRZSaesWJRuBvEwXqDdWwpwZBg=
JWT_REFRESH_SECRET=2NYEzTx33gAfo5vZlfRZSaesWJRuBvEwXqDdWwpwZBg=
JWT_ACCESS_TTL_SECONDS=900
JWT_REFRESH_TTL_SECONDS=604800

# =============================================================================
# Password Hashing (Argon2)
# =============================================================================
ARGON2_MEMORY_COST=19456
ARGON2_TIME_COST=2

# =============================================================================
# Rate Limiting
# =============================================================================
RATE_LIMIT_MAX=120
RATE_LIMIT_TIME_WINDOW=5
# Optional: Comma-separated list of IPs to allowlist
# RATE_LIMIT_ALLOWLIST=127.0.0.1,::1

# =============================================================================
# CORS Configuration
# =============================================================================
# Optional: Comma-separated list of allowed origins
# If not set, defaults to: https://{PUBLIC_DOMAIN}, http://localhost:5173, http://localhost:3000
# CORS_ORIGINS=https://example.com,https://app.example.com

# =============================================================================
# Public Domain & Proxy
# =============================================================================
PUBLIC_DOMAIN=localhost
# CADDY_ADMIN_EMAIL=admin@example.com

# =============================================================================
# API Documentation Basic Auth
# =============================================================================
# Optional: Protect /docs endpoint with basic auth
# Both must be set together or not at all
# DOCS_BASIC_AUTH_USER=admin
# DOCS_BASIC_AUTH_PASSWORD=change-me

# =============================================================================
# OAuth 42 Configuration
# =============================================================================
# Get these from: https://profile.intra.42.fr/oauth/applications
OAUTH42_CLIENT_ID=u-s4t2ud-d81aff87a24863bba52beedd4ec605844deeceea02ff5d49a0529064eade695b
OAUTH42_CLIENT_SECRET=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
OAUTH42_REDIRECT_URI=https://localhost/

# Optional: Override default 42 API endpoints
# OAUTH42_AUTH_URL=https://api.intra.42.fr/oauth/authorize
# OAUTH42_TOKEN_URL=https://api.intra.42.fr/oauth/token
# OAUTH42_API_BASE_URL=https://api.intra.42.fr/v2

# =============================================================================
# Two-Factor Authentication (2FA)
# =============================================================================
# IMPORTANT: Generate encryption key using: openssl rand -hex 32
TWOFA_ENCRYPTION_KEY=769a02b119ef89bc2da5f1f60acdb005eceb278ec1461efece9b9d5c9f6aa352
TWOFA_CHALLENGE_TTL_SECONDS=300
TWOFA_RECOVERY_CODES_COUNT=10

# Trusted device configuration
# IMPORTANT: Generate secret using: openssl rand -base64 32
TWOFA_TRUSTED_DEVICE_SECRET=kMqcugk2niCZiARfgfEyOeJ2XJ7hG93O9NqzT/4CMQc=
TWOFA_TRUSTED_DEVICE_TTL_DAYS=30
TWOFA_TRUSTED_DEVICE_MAX=5

# =============================================================================
# Quick Setup Instructions
# =============================================================================
# 1. Generate secure secrets:
#    JWT_ACCESS_SECRET:           openssl rand -base64 32
#    JWT_REFRESH_SECRET:          openssl rand -base64 32
#    TWOFA_ENCRYPTION_KEY:        openssl rand -hex 32
#    TWOFA_TRUSTED_DEVICE_SECRET: openssl rand -base64 32
#
# 2. Register OAuth app at: https://profile.intra.42.fr/oauth/applications
#    Set redirect URI to: http://localhost:5173/
#
# 3. Update OAUTH42_CLIENT_ID and OAUTH42_CLIENT_SECRET with your values
#
# 4. For production, update PUBLIC_DOMAIN and other security settings
